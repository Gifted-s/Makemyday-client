(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[7],{88:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return x});var n=a(42),r=a(13),c=a.n(r),s=a(21),o=a(6),l=a(7),i=a(9),m=a(8),u=a(10),d=a(0),h=a.n(d),p=a(23),g=a.n(p),b=a(86),y=a.n(b),f=a(27),E=a.n(f),v=a(41),C=a.n(v),N=a(30),w=a(85),k=a(5),S=a(4),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleUploadStart=function(){return a.setState({isUploading:!0,progress:0})},a.handleProgress=function(e){return a.setState({progress:e})},a.handleUploadError=function(e){a.setState({isUploading:!1})},a.handleUploadSuccess=function(e){a.setState({avatar:e,progress:100,isUploading:!1}),E.a.storage().ref("images").child(e).getDownloadURL().then(function(e){a.setState({avatarURL:e,imgUrl:e})})},a.state={items:[],avatar:"",isUploading:!1,progress:0,avatarURL:"",selectedItem:!1,event:"",date:"",newCart:{},name:"",price:0,description:0,imgUrl:"",CartContructor:{},cartToArray:[],itemNeeded:"",page:1,changeScreen:!1,isSubmitted:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),this.setState({CartContructor:N.a}),e.next=4,fetch("https://mmdapi.herokuapp.com/devapi/v1/getProducts",{method:"Get",headers:{"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e.message});case 4:t=e.sent,this.setState({items:t});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleIncrease",value:function(e){var t=new N.a(this.state.CartContructor);t.increaseByOne(e),this.setState({CartContructor:t})}},{key:"handleDecrease",value:function(e){var t=new N.a(this.state.CartContructor);t.reduceByOne(e),this.setState({CartContructor:t})}},{key:"addToCart",value:function(e){var t=e._id;this.setState({selectedItem:!0});var a=new N.a(this.state.CartContructor);a.addToCart(t,e),this.setState({CartContructor:a}),g()("Selected","Successfully added "+e.name,"success")}},{key:"addItem",value:function(){var e=Object(s.a)(c.a.mark(function e(){var t,a,r,s,o,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.scrollTo(0,0),this.state.name){e.next=5;break}return e.abrupt("return",g()("Please enter the name of the item","","error"));case 5:if(this.state.description){e.next=9;break}return e.abrupt("return",g()("Please enter the description of the item","","error"));case 9:if(0!==this.state.price){e.next=13;break}return e.abrupt("return",g()("Please enter the price of the item","","error"));case 13:if(this.state.imgUrl){e.next=15;break}return e.abrupt("return",g()("Please upload an image of the item or wait for file update to be completed if you have started uploading ","","error"));case 15:return t=this.state,a=t.name,r=t.price,s=t.description,o=t.imgUrl,e.next=18,fetch("https://mmdapi.herokuapp.com/devapi/v1/addProduct",{method:"Post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:a,price:r,description:s,imgUrl:o})}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e.message});case 18:(l=e.sent)&&(this.setState({items:[l].concat(Object(n.a)(this.state.items))}),g()("Item added ","".concat(this.state.name," has been added to the item of your event"),"success"),this.setState({page:this.state.page-2}));case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(s.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.scrollTo(0,0),t.preventDefault(),this.state.date){e.next=6;break}return e.abrupt("return",g()("Error","Please select the date for your event","error"));case 6:if(this.state.CartContructor.item!=={}){e.next=10;break}return e.abrupt("return",g()("Error","please select an item or more for your event","error"));case 10:return this.setState({isSubmitted:!0}),e.next=13,fetch("https://mmdapi.herokuapp.com/devapi/v1/handleItem/".concat(this.props._id),{method:"Post",headers:{"Content-type":"application/json"},body:JSON.stringify({eventName:this.state.event,eventDate:this.state.date,items:this.state.CartContructor.toArray(),totalPrice:this.state.CartContructor.totalPrice,totalQty:this.state.CartContructor.totalQuantity})}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return e.message});case 13:this.setState({isSubmitted:!1,page:1}),g()(h.a.createElement("div",{style:{overflowX:"hidden"}},h.a.createElement("h1",{className:"my-4 text-success"},"Congratulations ",this.props.name,"!!!"),h.a.createElement("p",{className:"text-secondary"},"We successfully completed your event page"),h.a.createElement("div",{className:" my-3 text-center"},h.a.createElement("p",{className:"my-3"},"Link to page "),h.a.createElement("a",{id:"link_text",className:"my-3 text-center",href:"/event/".concat(this.props._id)},"https://makemyday.netlify.app/event/",this.props._id),h.a.createElement("div",null,h.a.createElement("button",{onClick:function(){return g()("Link Copied"," ","success")},className:"btn-primary btn my-4"},h.a.createElement(y.a,{style:{backgroundColor:"transparent",color:"white",border:"none"},"data-clipboard-text":"https://makemyday.netlify.app/event/".concat(this.props._id)},"Copy Link"))," ",h.a.createElement("a",{href:"/event/".concat(this.props._id),className:"btn my-4 ml-3 btn-primary"}," Visit Page")))));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return h.a.createElement("div",{onClick:function(){return e.props.close()},style:{backgroundColor:"white"},className:"container schedule"},h.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},1===this.state.page?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"form-group"},h.a.createElement("label",{htmlFor:"name"},"Enter the name of your event here e.g Wedding between Shola and Micheal"),h.a.createElement("input",{value:this.state.event,onChange:function(t){return e.setState({event:t.target.value})},type:"text",className:"form-control",placeholder:"Enter event name"})),h.a.createElement("label",{style:{marginTop:-20},className:"text-center or mr-3"},"Or simply pick between the following events"),h.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},className:"row"},h.a.createElement("div",{onClick:function(){e.setState({event:"Wedding"}),g()({title:"Wedding selected",text:'Click on the "Continue" button at the bottom of the page to proceed ',icon:"success"})},className:" outer_card col-md-3 col-sm-4 "},h.a.createElement("div",{style:{backgroundColor:"#0093f5"},className:"inner_card inner1"},h.a.createElement("h4",{className:"text-center mt-3",style:{color:"white"}},h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.t}),"Wedding"))),h.a.createElement("div",{onClick:function(){e.setState({event:"Birthday"}),g()({title:"Birthday selected",text:'Click on the "Continue" button at the bottom of the page to proceed ',icon:"success"})},className:" outer_card col-md-3 col-sm-4 "},h.a.createElement("div",{style:{backgroundColor:"springgreen"},className:"inner_card inner1"},h.a.createElement("h4",{className:"text-center mt-3",style:{color:"white"}},h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.f}),"Birthday"))),h.a.createElement("div",{onClick:function(){e.setState({event:"Naming ceremony"}),g()({title:"Naming selected",text:'Click on the "Continue" button at the bottom of the page to proceed ',icon:"success"})},className:" outer_card col-md-3 col-sm-4 "},h.a.createElement("div",{style:{backgroundColor:"deeppink"},className:"inner_card inner1"},h.a.createElement("h4",{className:"text-center mt-3",style:{color:"white"}},h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.d}),"Naming"))),h.a.createElement("div",{onClick:function(){e.setState({event:"Anniversary"}),g()({title:"Anniversary selected",text:'Click on the "Continue" button at the bottom of the page to proceed ',icon:"success"})},className:" outer_card col-md-3 col-sm-4 "},h.a.createElement("div",{style:{backgroundColor:"red"},className:"inner_card inner1"},h.a.createElement("h4",{className:"text-center mt-3",style:{color:"white"}},h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.h}),"Anniversary"))),h.a.createElement("div",{onClick:function(){e.setState({event:"Retirement"}),g()({title:"Retirement selected",text:'Click on the "Continue" button at the bottom of the page to proceed ',icon:"success"})},className:" outer_card col-md-3 col-sm-4 "},h.a.createElement("div",{style:{backgroundColor:"cyan"},className:"inner_card inner1"},h.a.createElement("h4",{className:"text-center mt-3",style:{color:"white"}},h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.x}),"Retirement"))),h.a.createElement("div",{onClick:function(){e.setState({event:"Graduation"}),g()({title:"Graduation selected",text:'Click on the "Continue" button at the bottom of the page to proceed ',icon:"success"})},className:" outer_card col-md-3 col-sm-4 "},h.a.createElement("div",{style:{backgroundColor:"gold"},className:"inner_card inner1"},h.a.createElement("h4",{className:"text-center mt-3",style:{color:"white"}},h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.y}),"Graduation"))),h.a.createElement("div",{onClick:function(){e.setState({event:"Festival"}),g()({title:"Festival selected",text:'Click on the "Continue" button at the bottom of the page to proceed ',icon:"success"})},className:" outer_card col-md-3 col-sm-4 "},h.a.createElement("div",{style:{backgroundColor:"royalblue"},className:"inner_card inner1"},h.a.createElement("h4",{className:"text-center mt-3",style:{color:"white"}},h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.g}),"Festival")))),h.a.createElement("button",{type:"button",onClick:function(){window.scrollTo(0,0),e.state.event?e.setState({page:e.state.page+1}):g()(h.a.createElement("div",null,h.a.createElement("h1",{style:{color:"deeppink"}},"Sorry"),h.a.createElement("p",null,"Please type the event name inside the input box or select from the events listed")))},className:"btn btn-primary btn-large mt-4"},"Continue  ",h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.c}))):h.a.createElement(h.a.Fragment,null,2===this.state.page?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"form-group"},h.a.createElement("label",{htmlFor:"name"},"Enter the date for this event"),h.a.createElement("input",{onChange:function(t){e.setState({date:t.target.value})},type:"date",placeholder:"Enter event name"})),h.a.createElement("div",{className:"mb-3"},h.a.createElement("label",{htmlFor:"validationTextarea"},"Select the materials you need for the event ",h.a.createElement("span",{className:"badge badge-primary ml-2 my-2"},"No of items selected : ",this.state.CartContructor.item?this.state.CartContructor.totalQuantity:0),h.a.createElement("br",null),h.a.createElement("button",{type:"button",onClick:function(){return e.setState({page:4})},className:"btn btn-primary my-2 ml-3"},"Can't find an item here? click here to add the item yourself"),"  "),h.a.createElement("div",{className:"row"},this.state.items.map(function(t){return h.a.createElement("div",{key:t._id,className:"col-md-3 col-sm-6"},h.a.createElement("div",{className:"card"},h.a.createElement("img",{src:t.imgUrl,className:"card-img-top img-fluid card__img",alt:"..."}),h.a.createElement("div",{className:"card-body"},h.a.createElement("h5",{className:"card-title"},t.name),h.a.createElement("p",{className:"card-text"},t.description),h.a.createElement("p",{className:"card-text"},"Price  \u20a6",t.price),h.a.createElement("button",{type:"button",onClick:function(){return e.addToCart(t)},className:"btn btn-primary"},"Select Cake"))))}))),h.a.createElement(h.a.Fragment,null,h.a.createElement("button",{type:"button",onClick:function(){window.scrollTo(0,0),e.setState({page:e.state.page-1})},className:"btn  btn-primary btn-large mt-4"}," ",h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.b})," Previous page  "),h.a.createElement("button",{type:"button",onClick:function(){return window.scrollTo(0,0),e.state.date?e.state.selectedItem?void e.setState({page:e.state.page+1}):g()("Error","Please select an item","error"):g()("Error","Please enter the date for your event","error")},className:"btn btn-primary ml-3 btn-large mt-4"},"Continue  ",h.a.createElement(k.a,{style:{color:"white",marginRight:10},icon:S.c})))):h.a.createElement(h.a.Fragment,null,3===this.state.page?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"row my-4 mmm"},h.a.createElement("h5",null,"Increase or decrease the quantity of this material  "),h.a.createElement("h6",{className:"total_price"},"Total Price ",h.a.createElement("br",null),h.a.createElement("span",{className:"badge badge-secondary p-2"},"\u20a6",this.state.CartContructor.totalPrice))),h.a.createElement("div",{className:"row"},this.state.CartContructor.toArray().map(function(t){return h.a.createElement("div",{className:"col-md-3 col-sm-6"},h.a.createElement("div",{className:"card"},h.a.createElement("img",{src:t.item.imgUrl,className:"card-img-top img-fluid card__img",alt:"..."}),h.a.createElement("div",{className:"card-body"},h.a.createElement("h5",{style:{fontWeight:"600"},className:"card-title"},t.item.name),h.a.createElement("p",{className:"card-text"},t.item.description),h.a.createElement("p",{className:"card-text"},"Price  \u20a6",t.price),h.a.createElement("p",{className:"card-text"},"Quantity  ",h.a.createElement("span",{style:{float:"right"},className:"badge badge-success text-light"},t.qty)),h.a.createElement("div",{className:"btn_shop"},h.a.createElement("button",{type:"button",onClick:function(){e.handleIncrease(t.item._id)},className:"btn btn-primary "},"Increase ",h.a.createElement(k.a,{style:{color:"white"},icon:S.s})," 1"),h.a.createElement("button",{type:"button",onClick:function(){e.handleDecrease(t.item._id)},className:"btn btn-primary ml-2"},"Reduce ",h.a.createElement(k.a,{style:{color:"white"},icon:S.q}),"  1 ")))))})),this.state.isSubmitted?h.a.createElement("div",{className:"btn-group"},h.a.createElement("button",{type:"button",onClick:function(){e.setState({isSubmitted:!1})},className:"btn  btn-primary  mt-4"},"  Cancel ",h.a.createElement(k.a,{style:{color:"white",marginLeft:10},icon:S.z})," "),h.a.createElement("button",{type:"submit",className:"btn btn-primary ml-3 btn-large mt-4",disabled:!0},"Please wait....  ",h.a.createElement(w.a,{style:{width:20,height:20,marginLeft:10}}))):h.a.createElement("div",{className:"btn-group"},h.a.createElement("button",{type:"button",onClick:function(){window.scrollTo(0,0),e.setState({page:e.state.page-1})},className:"btn  btn-primary mt-4"},"  ",h.a.createElement(k.a,{style:{color:"white",marginLeft:10},icon:S.b})," Previous  "),h.a.createElement("button",{type:"submit",className:"btn btn-primary ml-3 btn-large mt-4"},"Submit "))):h.a.createElement(h.a.Fragment,null,4===this.state.page?h.a.createElement("div",null,h.a.createElement("div",{className:"form-group"},h.a.createElement("label",{htmlFor:"name"},"Enter the name of this item"),h.a.createElement("input",{onChange:function(t){e.setState({name:t.target.value})},type:"text",className:"form-control",placeholder:"Enter item name"})),h.a.createElement("div",{className:"form-group"},h.a.createElement("label",{htmlFor:"name"},"Describe item"),h.a.createElement("input",{onChange:function(t){e.setState({description:t.target.value})},type:"text",className:"form-control",placeholder:"Give a description for the item here"})),h.a.createElement("div",{className:"form-group"},h.a.createElement("label",{htmlFor:"name"},"Enter the price fo this item"),h.a.createElement("input",{onChange:function(t){e.setState({price:t.target.value})},type:"number",className:"form-control",placeholder:"Enter the price for the item"})),h.a.createElement("div",{className:"form-group"},h.a.createElement("label",null,"Add image file(Image will show here after upload):"),this.state.isUploading&&h.a.createElement("div",null,h.a.createElement("p",{style:{fontWeight:"bolder"}},"Uploading image please wait: ",this.state.progress,"%"),h.a.createElement("div",{className:"progress mt-2 mb-2",style:{height:20}},h.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(this.state.progress,"%")},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}))),this.state.avatarURL&&h.a.createElement("img",{alt:"heoooo",style:{width:126,height:120},src:this.state.avatarURL}),h.a.createElement(C.a,{accept:"image/*",name:"avatar",randomizeFilename:!0,storageRef:E.a.storage().ref("images"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress})),h.a.createElement("div",{className:"form-group"},h.a.createElement("input",{type:"button",value:"Previous",onClick:function(){return e.setState({isUploading:!1,page:e.state.page-2})},className:" btn btn-primary"}),"      ",h.a.createElement("input",{type:"button",value:"Submit",onClick:function(){return e.addItem()},className:" btn btn-primary"}))):null)))))}}]),t}(d.Component)}}]);
//# sourceMappingURL=7.250327ac.chunk.js.map